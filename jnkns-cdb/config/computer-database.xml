<?xml version='1.1' encoding='UTF-8'?>
<project>
    <description></description>
    <keepDependencies>false</keepDependencies>
    <properties>
        <com.coravy.hudson.plugins.github.GithubProjectProperty plugin="github@1.29.0">
            <projectUrl>https://github.com/alejeau/computer-database/</projectUrl>
            <displayName></displayName>
        </com.coravy.hudson.plugins.github.GithubProjectProperty>
    </properties>
    <scm class="hudson.plugins.git.GitSCM" plugin="git@3.8.0">
        <configVersion>2</configVersion>
        <userRemoteConfigs>
            <hudson.plugins.git.UserRemoteConfig>
                <url>https://github.com/alejeau/computer-database</url>
            </hudson.plugins.git.UserRemoteConfig>
        </userRemoteConfigs>
        <branches>
            <hudson.plugins.git.BranchSpec>
                <name>*/dev</name>
            </hudson.plugins.git.BranchSpec>
        </branches>
        <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
        <submoduleCfg class="list"/>
        <extensions/>
    </scm>
    <canRoam>true</canRoam>
    <disabled>false</disabled>
    <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
    <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
    <triggers/>
    <concurrentBuild>false</concurrentBuild>
    <builders>
        <hudson.tasks.Shell>
        <command># Debian+JDK8+MVN+GIT+CDB container name
DEB_CONTAINER=jdk8-mvn-cdb
MAVEN_PROJECT=computer-database
DOCKER_ID_USER=alejeau

# Launch the pull and tests
sudo docker exec $DEB_CONTAINER /bin/sh -c &apos;/home/git-and-run.sh -t test&apos;

# Launch pull master and package the app
sudo docker exec $DEB_CONTAINER /bin/sh -c &apos;/home/git-and-run.sh -t production&apos;

sudo docker cp $DEB_CONTAINER:$MAVEN_PROJECT/target/$MAVEN_PROJECT.war /home/$MAVEN_PROJECT/$MAVEN_PROJECT.war

sudo docker build /home/$MAVEN_PROJECT/

sudo docker push $DOCKER_ID_USER/$MAVEN_PROJECT:latest
        </command>
        </hudson.tasks.Shell>
    </builders>
    <publishers/>
    <buildWrappers/>
</project>

